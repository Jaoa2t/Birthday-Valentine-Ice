<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>For You üíó</title>

  <style>
    *{ margin:0; padding:0; box-sizing:border-box; }
    body{
      height:100vh;
      display:grid;
      place-items:center;
      background:#fff6f9;
      color:#2a1f24;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      overflow:hidden;
    }

    body::before{
      content:"";
      position:fixed;
      inset:0;
      background:
        radial-gradient(circle at 20% 10%, rgba(255,145,180,.22), transparent 55%),
        radial-gradient(circle at 80% 90%, rgba(255,90,140,.12), transparent 55%),
        radial-gradient(circle at 50% 55%, rgba(255,220,235,.30), transparent 65%);
      pointer-events:none;
    }

    .wrap{
      width:min(92vw, 620px);
      padding:22px;
      position:relative;
      z-index:2;
    }

    .card{
      background: rgba(255,255,255,0.78);
      border: 1px solid rgba(255, 90, 140, 0.16);
      border-radius: 28px;
      padding: 26px;
      box-shadow: 0 22px 80px rgba(255, 90, 140, 0.12);
      backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
      transform: translateY(10px);
      animation: rise .65s ease forwards;
    }

    @keyframes rise{ to{ transform: translateY(0); } }

    .top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom:16px;
    }

    .chip{
      font-size:13px;
      padding:8px 12px;
      border-radius:999px;
      background: rgba(255, 90, 140, 0.08);
      border: 1px solid rgba(255, 90, 140, 0.12);
      color: rgba(42,31,36,0.85);
      letter-spacing:.2px;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }

    .tiny-heart{
      width:10px;
      height:10px;
      transform: rotate(45deg);
      background:#ff3b7a;
      position:relative;
      opacity:.95;
    }
    .tiny-heart::before,
    .tiny-heart::after{
      content:"";
      position:absolute;
      width:10px;
      height:10px;
      background:#ff3b7a;
      border-radius:50%;
    }
    .tiny-heart::before{ left:-5px; top:0; }
    .tiny-heart::after{ left:0; top:-5px; }

    h1{
      font-size: 34px;
      line-height: 1.15;
      letter-spacing: -0.9px;
      margin-bottom: 8px;
      color:#2a1f24;
    }

    .sub{
      font-size:15px;
      line-height:1.7;
      color: rgba(42,31,36,0.72);
      margin-bottom: 16px;
      white-space: pre-line;
    }

    .panel{
      margin-top: 14px;
      padding: 16px;
      border-radius: 20px;
      background: rgba(255, 90, 140, 0.05);
      border: 1px solid rgba(255, 90, 140, 0.12);
    }

    .typing{
      min-height: 76px;
      font-size: 18px;
      line-height: 1.7;
      font-weight: 850;
      letter-spacing: -0.2px;
      color:#2a1f24;
      white-space: pre-line;
    }

    .actions{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 16px;
    }

    button{
      border:none;
      border-radius: 16px;
      padding: 14px 14px;
      font-weight: 900;
      font-size: 14px;
      cursor:pointer;
      transition: transform .12s ease, opacity .12s ease;
      user-select:none;
    }
    button:active{ transform: scale(.98); }

    .primary{
      background:#ff3b7a;
      color:#fff;
      box-shadow: 0 14px 40px rgba(255, 59, 122, 0.18);
    }
    .ghost{
      background: rgba(255, 90, 140, 0.08);
      border: 1px solid rgba(255, 90, 140, 0.14);
      color:#2a1f24;
    }

    .foot{
      margin-top: 14px;
      font-size: 12px;
      color: rgba(42,31,36,0.55);
      text-align:center;
    }

    /* floating minimal hearts */
    .float{
      position: fixed;
      left: 0;
      bottom: -30px;
      width: 10px;
      height: 10px;
      pointer-events: none;
      z-index: 10;
      animation: floatUp linear forwards;
      filter: drop-shadow(0 10px 25px rgba(255, 59, 122, 0.12));
    }
    .float .h{
      width: 10px;
      height: 10px;
      transform: rotate(45deg);
      background: rgba(255, 59, 122, 0.30);
      position: relative;
    }
    .float .h::before,
    .float .h::after{
      content:"";
      position:absolute;
      width: 10px;
      height: 10px;
      background: rgba(255, 59, 122, 0.30);
      border-radius: 50%;
    }
    .float .h::before{ left:-5px; top:0; }
    .float .h::after{ left:0; top:-5px; }

    @keyframes floatUp{
      0% { transform: translateY(0) scale(1); opacity: 0; }
      12% { opacity: 1; }
      100% { transform: translateY(-112vh) scale(1.6); opacity: 0; }
    }

    /* overlay */
    .overlay{
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(255, 246, 249, 0.90);
      backdrop-filter: blur(10px);
      z-index: 99;
      padding: 18px;
    }

    .final{
      width: min(92vw, 680px);
      border-radius: 30px;
      padding: 26px;
      background: rgba(255,255,255,0.82);
      border: 1px solid rgba(255, 90, 140, 0.16);
      box-shadow: 0 22px 90px rgba(255, 90, 140, 0.14);
      text-align: center;
      transform: translateY(10px);
      animation: rise .5s ease forwards;
    }

    .name{
      font-size: 54px;
      letter-spacing: 1px;
      margin: 8px 0 8px;
      font-weight: 950;
      color: #ff3b7a;
      text-shadow: 0 12px 45px rgba(255, 59, 122, 0.18);
    }

    .line{
      width: 56px;
      height: 2px;
      background: rgba(255, 59, 122, 0.26);
      margin: 10px auto 14px;
      border-radius: 999px;
    }

    .finalText{
      font-size: 18px;
      line-height: 1.75;
      font-weight: 900;
      margin-bottom: 10px;
      color:#2a1f24;
      white-space: pre-line;
    }

    .mini{
      font-size: 14px;
      line-height: 1.7;
      color: rgba(42,31,36,0.70);
      margin-bottom: 18px;
      white-space: pre-line;
    }

    .finalImage{
      width: 100%;
      max-width: 520px;
      aspect-ratio: 4 / 3;
      object-fit: cover;
      border-radius: 22px;
      border: 1px solid rgba(255, 90, 140, 0.18);
      box-shadow: 0 20px 70px rgba(255, 90, 140, 0.12);
      margin: 14px auto 18px;
      display:block;
    }

    /* Game UI */
    .gameTitle{
      font-weight: 950;
      font-size: 16px;
      margin-bottom: 6px;
      color:#2a1f24;
    }

    .gameHint{
      font-size: 13px;
      color: rgba(42,31,36,0.70);
      line-height: 1.6;
      margin-bottom: 12px;
      white-space: pre-line;
    }

    .progress{
      height: 10px;
      border-radius: 999px;
      background: rgba(255, 90, 140, 0.10);
      border: 1px solid rgba(255, 90, 140, 0.14);
      overflow:hidden;
      margin-bottom: 14px;
    }

    .bar{
      height: 100%;
      width: 0%;
      background: rgba(255, 59, 122, 0.55);
      border-radius: 999px;
      transition: width .25s ease;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }

    .tile{
      border-radius: 18px;
      padding: 16px 10px;
      text-align:center;
      background: rgba(255,255,255,0.7);
      border: 1px solid rgba(255, 90, 140, 0.14);
      cursor:pointer;
      font-weight: 900;
      transition: transform .12s ease, background .12s ease;
      user-select:none;
    }
    .tile:hover{ transform: translateY(-1px); }
    .tile:active{ transform: scale(.98); }

    .tile.good{
      background: rgba(255, 59, 122, 0.10);
      border-color: rgba(255, 59, 122, 0.25);
    }
    .tile.bad{
      opacity: .55;
    }

    .choices{
      display:grid;
      grid-template-columns: 1fr;
      gap: 10px;
    }

    .choice{
      border-radius: 18px;
      padding: 14px 14px;
      background: rgba(255,255,255,0.72);
      border: 1px solid rgba(255, 90, 140, 0.14);
      cursor:pointer;
      font-weight: 900;
      transition: transform .12s ease;
      user-select:none;
      text-align:left;
    }
    .choice:hover{ transform: translateY(-1px); }
    .choice:active{ transform: scale(.98); }

    .center{
      display:flex;
      justify-content:center;
      gap:10px;
      flex-wrap: wrap;
    }

    .pill{
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(255, 90, 140, 0.08);
      border: 1px solid rgba(255, 90, 140, 0.14);
      font-weight: 900;
      font-size: 13px;
      cursor:pointer;
      user-select:none;
      transition: transform .12s ease;
    }
    .pill:hover{ transform: translateY(-1px); }
    .pill:active{ transform: scale(.98); }

    .success{
      margin-top: 12px;
      padding: 12px 14px;
      border-radius: 18px;
      background: rgba(255, 59, 122, 0.08);
      border: 1px solid rgba(255, 59, 122, 0.16);
      font-weight: 900;
      line-height: 1.7;
      white-space: pre-line;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <div class="top">
        <div class="chip">for you <span class="tiny-heart"></span></div>
        <div class="chip" id="stageChip">stage 1/4</div>
      </div>

      <h1 id="title">‡∏Ñ‡∏ô‡∏î‡∏µ‡∏Ç‡∏≠‡∏á‡∏û‡∏µ‡πà‚Ä¶</h1>
      <div class="sub" id="subtitle">
        ‡πÄ‡∏ß‡πá‡∏ö‡∏ô‡∏µ‡πâ‡∏â‡∏±‡∏ô‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ô‡∏∞ üíó  
        ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î
      </div>

      <!-- MAIN PANEL -->
      <div class="panel">
        <div class="typing" id="mainBox">...</div>
      </div>

      <div class="actions" id="actions">
        <button class="primary" id="btnNext">‡πÑ‡∏õ‡∏ï‡πà‡∏≠</button>
        <button class="ghost" id="btnHearts">‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏´‡∏±‡∏ß‡πÉ‡∏à</button>
      </div>

      <div class="foot">made with love</div>
    </div>
  </div>

  <!-- Final -->
  <div class="overlay" id="overlay">
    <div class="final">
      <div class="chip" style="display:inline-block;">final</div>
      <div class="name" id="loverName">ICE</div>
      <div class="line"></div>

      <img id="finalImage" class="finalImage" alt="our photo" />

      <div class="finalText" id="finalText">‡πÄ‡∏≠‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡∏à‡∏≤‡∏Å‡∏û‡∏µ‡πà‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢</div>
      <div class="mini" id="finalMini">
        ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ö‡∏≤‡∏¢‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏û‡∏µ‡πà  
        ‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ‚Ä¶‡∏Ç‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡πÜ ‡πÄ‡∏ò‡∏≠ üíó
      </div>

      <div class="actions" style="grid-template-columns:1fr;">
        <button class="primary" id="btnBoom">‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏û‡∏µ‡πà</button>
        <button class="ghost" id="btnClose">‡∏õ‡∏¥‡∏î</button>
      </div>
    </div>
  </div>

  <script>
    // =============================
    // CUSTOMIZE
    // =============================
    const loverName = "ICE"; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏ü‡∏ô‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ

    // ‡πÉ‡∏™‡πà‡∏£‡∏π‡∏õ: ‡πÉ‡∏ä‡πâ URL ‡∏£‡∏π‡∏õ ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå (‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô)
    // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: "photo.jpg" ‡∏´‡∏£‡∏∑‡∏≠ "images/us.jpg"
    const finalImage = "https://s.imgz.io/2026/02/17/e1dfd95c82846cb82b05b6a1adcdaca49b422dbcb5f8ae9b.png";

    const storyMessages = [
      "‡∏û‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡∏≠‡∏¢‡∏≤‡∏Å‡∏ö‡∏≠‡∏Å‡πÄ‡∏ò‡∏≠‚Ä¶",
      "‡∏°‡∏±‡∏ô‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏¢‡∏¥‡πà‡∏á‡πÉ‡∏´‡∏ç‡πà‡∏≠‡∏∞‡πÑ‡∏£‡∏ô‡∏∞ ü§î",
      "‡πÅ‡∏ï‡πà‡∏°‡∏±‡∏ô‡∏¢‡∏≠‡∏°‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Å‡∏±‡∏ö‡πÄ‡∏™‡∏∑‡πâ‡∏≠ Homeboy ‡∏ó‡∏µ‡πà‡πÄ‡∏ò‡∏≠‡πÉ‡∏´‡πâ",
      "‡πÅ‡∏ï‡πà‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏∞‡∏ñ‡∏∂‡∏á‡∏ï‡∏£‡∏á‡∏ô‡∏±‡πâ‡∏ô\n‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏ò‡∏≠‡∏ú‡πà‡∏≤‡∏ô 3 ‡∏î‡πà‡∏≤‡∏ô‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡πÜ ‡∏Å‡πà‡∏≠‡∏ô üò≥",
      "‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏° üíó"
    ];

    // =============================
    // ELEMENTS
    // =============================
    const stageChip = document.getElementById("stageChip");
    const titleEl = document.getElementById("title");
    const subtitleEl = document.getElementById("subtitle");
    const mainBox = document.getElementById("mainBox");

    const actions = document.getElementById("actions");
    const btnNext = document.getElementById("btnNext");
    const btnHearts = document.getElementById("btnHearts");

    const overlay = document.getElementById("overlay");
    const loverNameEl = document.getElementById("loverName");
    const finalImageEl = document.getElementById("finalImage");
    const btnClose = document.getElementById("btnClose");
    const btnBoom = document.getElementById("btnBoom");

    loverNameEl.textContent = loverName;

    // fallback image
    finalImageEl.src = finalImage || "https://images.unsplash.com/photo-1520975958225-96c4b64d6c5f?auto=format&fit=crop&w=1200&q=60";

    // =============================
    // FLOAT HEARTS
    // =============================
    function spawnFloat(){
      const el = document.createElement("div");
      el.className = "float";
      el.innerHTML = `<div class="h"></div>`;

      const left = Math.random() * 100;
      const duration = 3.4 + Math.random() * 3.8;
      const scale = 0.8 + Math.random() * 1.5;

      el.style.left = left + "vw";
      el.style.animationDuration = duration + "s";
      el.style.transform = `scale(${scale})`;

      document.body.appendChild(el);
      setTimeout(() => el.remove(), duration * 1000);
    }

    function floatHearts(amount=10){
      for(let i=0;i<amount;i++){
        setTimeout(spawnFloat, i*95);
      }
    }

    btnHearts.addEventListener("click", () => floatHearts(14));

    document.body.addEventListener("click", (e) => {
      if(e.target.tagName.toLowerCase() === "button") return;
      floatHearts(6);
    });

    // =============================
    // TYPING EFFECT
    // =============================
    let typing = false;
    function typeText(text){
      typing = true;
      mainBox.textContent = "";
      let i = 0;

      const timer = setInterval(() => {
        mainBox.textContent += text[i];
        i++;
        if(i >= text.length){
          clearInterval(timer);
          typing = false;
        }
      }, 32);
    }

    // =============================
    // STAGES
    // 0 = story
    // 1 = game1 (tap hearts)
    // 2 = game2 (memory)
    // 3 = game3 (quiz)
    // 4 = final
    // =============================
    let stage = 0;
    let storyIndex = 0;

    function setStageChip(){
      // stage 1/4 = story + 3 games
      const map = {
        0: "stage 1/4",
        1: "stage 2/4",
        2: "stage 3/4",
        3: "stage 4/4"
      };
      stageChip.textContent = map[stage] || "final";
    }

    setStageChip();
    typeText(storyMessages[storyIndex]);

    btnNext.addEventListener("click", () => {
      if(typing) return;

      // stage 0 story
      if(stage === 0){
        storyIndex++;
        floatHearts(10);

        if(storyIndex < storyMessages.length){
          typeText(storyMessages[storyIndex]);
          return;
        }

        // go to game1
        stage = 1;
        setStageChip();
        renderGame1();
        return;
      }

      // stage = game1/2/3 -> next only if completed (handled in game)
    });

    // =============================
    // GAME 1: Tap hearts to fill progress
    // =============================
    let game1Score = 0;
    function renderGame1(){
      titleEl.textContent = "‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 1";
      subtitleEl.textContent = "‡πÄ‡∏Å‡πá‡∏ö‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡∏î‡πà‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ üíó";

      actions.innerHTML = `
        <button class="primary" id="g1Tap">‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏´‡∏±‡∏ß‡πÉ‡∏à +1</button>
      `;

      mainBox.innerHTML = `
        <div class="gameTitle">Mini Game 1 ‚Äî Heart Meter</div>
        <div class="gameHint">‡πÅ‡∏ï‡∏∞‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö 10 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡∏á‡πà‡∏≤‡∏¢‡∏°‡∏≤‡∏Å ‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏≤‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡∏ó‡∏≥ üòå)</div>
        <div class="progress"><div class="bar" id="g1Bar"></div></div>
        <div style="font-weight:900; opacity:.9;">‡∏´‡∏±‡∏ß‡πÉ‡∏à: <span id="g1Count">0</span>/10</div>
      `;

      const g1Tap = document.getElementById("g1Tap");
      const g1Skip = document.getElementById("g1Skip");
      const g1Bar = document.getElementById("g1Bar");
      const g1Count = document.getElementById("g1Count");

      game1Score = 0;

      function update(){
        g1Count.textContent = game1Score;
        g1Bar.style.width = (game1Score/10)*100 + "%";
      }

      g1Tap.addEventListener("click", () => {
        game1Score++;
        floatHearts(5);
        if(game1Score > 10) game1Score = 10;
        update();

        if(game1Score >= 10){
          showSuccess("‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß üíó\n‡πÑ‡∏õ‡∏î‡πà‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏Å‡∏±‡∏ô");
          setTimeout(() => {
            stage = 2;
            setStageChip();
            renderGame2();
          }, 700);
        }
      });

      g1Skip.addEventListener("click", () => {
        showSuccess("‡πÇ‡∏≠‡πÄ‡∏Ñ‚Ä¶‡πÉ‡∏´‡πâ‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡πá‡πÑ‡∏î‡πâ üò≥\n‡πÑ‡∏õ‡∏î‡πà‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ");
        setTimeout(() => {
          stage = 2;
          setStageChip();
          renderGame2();
        }, 650);
      });

      update();
    }

    // =============================
    // GAME 2: Memory (find the love tile)
    // =============================
    let g2Answer = 0;
    function renderGame2(){
      titleEl.textContent = "‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 2";
      subtitleEl.textContent = "‡πÄ‡∏Å‡∏°‡∏à‡∏≥‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ô‡∏¥‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏°‡∏≤‡∏Å)";

      const tiles = Array.from({length:9}, (_,i)=>i);
      g2Answer = Math.floor(Math.random() * 9);

      mainBox.innerHTML = `
        <div class="gameTitle">Mini Game 2 ‚Äî Find the üíó</div>
        <div class="gameHint">
          ‡∏à‡∏≥‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á üíó ‡πÉ‡∏´‡πâ‡∏î‡∏µ‚Ä¶\n‡∏≠‡∏µ‡∏Å 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏°‡∏±‡∏ô‡∏à‡∏∞‡∏´‡∏≤‡∏¢ ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏´‡πâ‡πÄ‡∏ò‡∏≠‡∏Å‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
        </div>
        <div class="grid" id="g2Grid"></div>
      `;

      actions.innerHTML = `
        <button class="ghost" id="g2Reset">‡∏™‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
      `;

      const grid = document.getElementById("g2Grid");
      const g2Reset = document.getElementById("g2Reset");
      const g2Skip = document.getElementById("g2Skip");

      function build(showHeart){
        grid.innerHTML = "";
        tiles.forEach((i)=>{
          const t = document.createElement("div");
          t.className = "tile";
          t.dataset.i = i;

          if(showHeart && i === g2Answer){
            t.textContent = "üíó";
            t.classList.add("good");
          }else{
            t.textContent = " ";
          }

          grid.appendChild(t);
        });
      }

      // show for 1 sec
      build(true);
      setTimeout(() => build(false), 950);

      grid.addEventListener("click", (e) => {
        const tile = e.target.closest(".tile");
        if(!tile) return;

        const i = Number(tile.dataset.i);

        if(i === g2Answer){
          tile.textContent = "üíó";
          tile.classList.add("good");
          floatHearts(12);

          showSuccess("‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å üíó\n‡πÑ‡∏õ‡∏î‡πà‡∏≤‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Å‡∏±‡∏ô‡πÄ‡∏•‡∏¢");
          setTimeout(() => {
            stage = 3;
            setStageChip();
            renderGame3();
          }, 750);
        }else{
          tile.textContent = "√ó";
          tile.classList.add("bad");
        }
      });

      g2Reset.addEventListener("click", () => {
        g2Answer = Math.floor(Math.random() * 9);
        build(true);
        setTimeout(() => build(false), 950);
      });

      g2Skip.addEventListener("click", () => {
        showSuccess("‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‚Ä¶\n‡πÅ‡∏ï‡πà‡∏à‡∏£‡∏¥‡∏á‡πÜ ‡πÄ‡∏ò‡∏≠‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß üò≥");
        setTimeout(() => {
          stage = 3;
          setStageChip();
          renderGame3();
        }, 700);
      });
    }

    // =============================
    // GAME 3: Sweet quiz (choose the correct one)
    // =============================
    function renderGame3(){
      titleEl.textContent = "‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 3";
      subtitleEl.textContent = "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î üíó";

      mainBox.innerHTML = `
        <div class="gameTitle">Mini Game 3 ‚Äî Choose the best</div>
        <div class="gameHint">
          ‡∏ñ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 1 ‡∏Ç‡πâ‡∏≠‚Ä¶\n‡∏≠‡∏∞‡πÑ‡∏£‡∏Ñ‡∏∑‡∏≠‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏µ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡∏ó‡∏≥‡∏Å‡∏±‡∏ö‡πÄ‡∏ò‡∏≠‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î?
        </div>

        <div class="choices">
          <div class="choice" data-a="0">A) ‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡πÄ‡∏â‡∏¢‡πÜ ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏´‡πâ‡πÄ‡∏ò‡∏≠‡∏á‡∏á</div>
          <div class="choice" data-a="1">B) ‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡πÜ ‡πÄ‡∏ò‡∏≠‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏µ ‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏î‡∏µ</div>
          <div class="choice" data-a="0">C) ‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏°‡πà‡∏™‡∏ô‡πÉ‡∏à ‡∏ó‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏£‡∏¥‡∏á‡πÜ ‡πÅ‡∏≠‡∏ö‡∏£‡∏±‡∏Å</div>
          <div class="choice" data-a="0">D) ‡∏ó‡∏∞‡πÄ‡∏•‡∏≤‡∏∞‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏°‡πà‡∏á‡πâ‡∏≠</div>
        </div>
      `;

      actions.innerHTML = `
        <button class="primary" id="g3Ready">‡∏â‡∏±‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß</button>
      `;

      let chosen = null;
      const choices = mainBox.querySelectorAll(".choice");
      const g3Skip = document.getElementById("g3Skip");
      const g3Ready = document.getElementById("g3Ready");

      choices.forEach(c=>{
        c.addEventListener("click", ()=>{
          choices.forEach(x=>x.style.outline = "none");
          c.style.outline = "2px solid rgba(255, 59, 122, 0.35)";
          chosen = c;
        });
      });

      g3Ready.addEventListener("click", ()=>{
        if(!chosen){
          showSuccess("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡πâ‡∏≤ üò≥");
          return;
        }

        const ok = chosen.dataset.a === "1";

        if(ok){
          floatHearts(18);
          showSuccess("‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á üíó\n‡∏á‡∏±‡πâ‡∏ô‚Ä¶‡πÑ‡∏õ‡∏ü‡∏±‡∏á‡∏Ñ‡∏≥‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Å‡∏±‡∏ô");
          setTimeout(showFinal, 850);
        }else{
          showSuccess("‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Ç‡πâ‡∏≠‡∏ô‡∏±‡πâ‡∏ô üò≥\n‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ");
        }
      });

      g3Skip.addEventListener("click", ()=>{
        showSuccess("‡πÇ‡∏≠‡πÄ‡∏Ñ‚Ä¶\n‡πÅ‡∏ï‡πà‡∏Ñ‡∏≥‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡∏ü‡∏±‡∏á‡∏ô‡∏∞ üíó");
        setTimeout(showFinal, 800);
      });
    }

    // =============================
    // SUCCESS BOX
    // =============================
    function showSuccess(text){
      const old = document.getElementById("successBox");
      if(old) old.remove();

      const box = document.createElement("div");
      box.className = "success";
      box.id = "successBox";
      box.textContent = text;

      const panel = document.querySelector(".panel");
      panel.appendChild(box);

      setTimeout(() => {
        if(box && box.parentNode) box.remove();
      }, 2200);
    }

    // =============================
    // FINAL
    // =============================
    function showFinal(){
      overlay.style.display = "flex";
      floatHearts(25);
    }

    btnClose.addEventListener("click", ()=>{
      overlay.style.display = "none";
      floatHearts(10);
    });

    btnBoom.addEventListener("click", ()=>{
      const cx = window.innerWidth / 2;
      const cy = window.innerHeight / 2;

      for(let i=0;i<60;i++){
        const el = document.createElement("div");
        el.className = "float";
        el.innerHTML = `<div class="h"></div>`;
        el.style.position = "fixed";
        el.style.left = cx + "px";
        el.style.top = cy + "px";
        el.style.bottom = "auto";
        el.style.animation = "none";
        el.style.zIndex = 999;

        const scale = 0.7 + Math.random() * 1.6;
        el.style.transform = `scale(${scale})`;

        document.body.appendChild(el);

        const angle = Math.random() * Math.PI * 2;
        const speed = 2 + Math.random() * 7;

        let x = cx, y = cy;
        let life = 0;
        const maxLife = 105;

        const t = setInterval(() => {
          life++;
          x += Math.cos(angle) * speed;
          y += Math.sin(angle) * speed;

          el.style.left = x + "px";
          el.style.top = y + "px";
          el.style.opacity = (1 - life/maxLife);

          if(life >= maxLife){
            clearInterval(t);
            el.remove();
          }
        }, 16);
      }
    });
  </script>
</body>
</html>
